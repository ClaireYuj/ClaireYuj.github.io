---
title: 面试八股--操作系统
top: false
cover: false
author: DULULU oO
date: 2023-04-18 17:06:03
password:
summary:
tags: 操作系统
categories: 面试
---
## 线程和进程
**概念**
**进程是计算机中正在运行的程序**，是操作系统进行资源分配和调度的基本单位。每个进程都有自己的地址空间和数据栈，不同进程之间互相独立。

**线程是进程中的一个执行单元**，是操作系统进行调度的基本单位。在一个进程中可以有多个线程，它们共享进程的地址空间和数据栈，因此可以共享数据和通信。
特点

进程有独立的地址空间，各进程之间互相独立，彼此隔离。进程之间通信需要借助操作系统提供的IPC机制。

线程共享进程的地址空间和数据栈，因此线程之间的通信比进程之间的通信更快捷、方便。
区别

1. 进程之间是互相独立的，线程之间是共享进程的资源的。
2. 进程拥有独立的地址空间，而线程共享所在进程的地址空间。
3. 进程拥有独立的堆和栈，线程共享所在进程的堆和栈。
4. 进程之间通信需要借助操作系统提供的IPC机制，而线程之间通可以直接通过共享内存、消息队列、信号量等机制实现。

## 多线程
原理

多线程就是在一个进程中创建多个线程来并发执行任务，可以提高系统的资源利用率和响应速度。多线程可以通过操作系统提供的线程库来实现，例如POSIX线程库（pthread）。
**如何实现同步**

多线程的实现需要考虑到线程间的同步问题。同步是指在多线程的环境中，为了避免多个线程同时访问共享的资源而引发的数据不一致、死锁等问题。一些常见的同步机制包括：

**互斥锁**：多个线程同时只有一个线程可以访问共享资源，其他需要等待。互斥锁可以保证在任意时刻只有一个线程访问临界从而避免数据不一致的问题。

**信号量**：可以用来控制多个线程的并发访问。信号量可以表示的可用数量，当某个线程需要访问共享资源时，需要申请信号如果信号量的值大于0，则可以访问资源，否则需要等待。

**条件变量**：可以用来实现线程之间的通信。条件变量提供了一待/通知机制，当条件不满足时，线程可以等待，当条件满足线程可以被通知并继续执行。

## 死锁


死锁是指多个进程或线程**因竞争系统资源而陷入一种互相等待的状态，导致所有进程或线程都无法继续执行下去**。这种状态被称为死锁状态。
条件

死锁发生需要满足以下四个条件：

**互斥条件**：一个资源只能被一个进程或线程占用，其他进程或线程需要等待。
**持有和等待条件**：一个进程或线程已经持有了一个资源，但还需要另外一个资源才能继续执行，而资源已被其他进程或线程占用。
**不可剥夺条件：**进程或线程持有的资源不能被其他进程或线程强制剥夺。
**循环等待条件**：多个进程或线程之间形成一个环路，每个进程或线程都在等待下一个进程或线程持的资源。

要避免死锁，需要破坏以上四个条件之一，例如：

通过加锁顺序来避免循环等待。
通过资源预分配和资源剥夺来避免持有和等待条件。
通过资源共享和剥夺来避免不可剥夺条件。
在实际编程中，避免死锁是一项非常重要的任务。对于多线程程序，需要仔细设计和管理线程之间的同步，避免出现死锁和其他线程安全问题。